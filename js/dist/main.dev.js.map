{"version":3,"sources":["main.js"],"names":["Carousel","element","options","Object","assign","slidesToScroll","slidesVisible","loop","pagination","navigation","children","slice","call","isMobile","currentItem","moveCallbacks","root","createDivWithClass","container","setAttribute","appendChild","items","map","child","item","setStyle","createNavigation","createPagination","forEach","cb","onWindowResize","window","addEventListener","bind","e","key","next","prev","ratio","length","style","width","nextButton","prevButton","onMove","index","classList","add","remove","undefined","buttons","i","button","gotoItem","push","activeButton","Math","floor","translateX","transform","mobile","innerWidth","className","div","document","createElement","onReady","querySelector","readyState"],"mappings":"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","sourcesContent":["class Carousel {\n  /**\n   * This callback type is called `requestCallback` and is displayed as a global symbol.\n   *\n   * @callback moveCallback\n   * @param {number} index\n   */\n\n  /**\n   * @param {HTMLElement} element\n   * @param {Object} options\n   * @param {Object} [options.slidesToScroll=1] Nombre d'éléments à faire défiler\n   * @param {Object} [options.slidesVisible=1] Nombre d'éléments visible dans un slide\n   * @param {boolean} [options.loop=false] Doit-t-on boucler en fin de carousel\n   * @param {boolean} [options.pagination=false]\n   * @param {boolean} [options.navigation=true]\n   */\n  constructor (element, options = {}) {\n    this.element = element\n    this.options = Object.assign({}, {\n      slidesToScroll: 1,\n      slidesVisible: 1,\n      loop: false,\n      pagination: false,\n      navigation: true\n    }, options)\n    let children = [].slice.call(element.children)\n    this.isMobile = false\n    this.currentItem = 0\n    this.moveCallbacks = []\n\n    // Modification du DOM\n    this.root = this.createDivWithClass('carousel')\n    this.container = this.createDivWithClass('carousel__container')\n    this.root.setAttribute('tabindex', '0')\n    this.root.appendChild(this.container)\n    this.element.appendChild(this.root)\n    this.items = children.map((child) => {\n      let item = this.createDivWithClass('carousel__item')\n      item.appendChild(child)\n      this.container.appendChild(item)\n      return item\n    })\n    this.setStyle()\n    if (this.options.navigation) {\n      this.createNavigation()\n    }\n    if (this.options.pagination) {\n      this.createPagination()\n    }\n\n    // Evenements\n    this.moveCallbacks.forEach(cb => cb(0))\n    this.onWindowResize()\n    window.addEventListener('resize', this.onWindowResize.bind(this))\n    this.root.addEventListener('keyup', e => {\n      if (e.key === 'ArrowRight' || e.key === 'Right') {\n        this.next()\n      } else if (e.key === 'ArrowLeft' || e.key === 'Left') {\n        this.prev()\n      }\n    })\n  }\n\n  /**\n   * Applique les bonnes dimensions aux éléments du carousel\n   */\n  setStyle () {\n    let ratio = this.items.length / this.slidesVisible\n    this.container.style.width = (ratio * 100) + \"%\"\n    this.items.forEach(item => item.style.width = ((100 / this.slidesVisible) / ratio) + \"%\")\n  }\n\n  /**\n   * Crée les flêches de navigation dans le DOM\n   */\n  createNavigation () {\n    let nextButton = this.createDivWithClass('carousel__next')\n    let prevButton = this.createDivWithClass('carousel__prev')\n    this.root.appendChild(nextButton)\n    this.root.appendChild(prevButton)\n    nextButton.addEventListener('click', this.next.bind(this))\n    prevButton.addEventListener('click', this.prev.bind(this))\n    if (this.options.loop === true) {\n      return\n    }\n    this.onMove(index => {\n      if (index === 0) {\n        prevButton.classList.add('carousel__prev--hidden')\n      } else {\n        prevButton.classList.remove('carousel__prev--hidden')\n      }\n      if (this.items[this.currentItem + this.slidesVisible] === undefined) {\n        nextButton.classList.add('carousel__next--hidden')\n      } else {\n        nextButton.classList.remove('carousel__next--hidden')\n      }\n    })\n  }\n\n  /**\n   * Crée la pagination dans le DOM\n   */\n  createPagination () {\n    let pagination = this.createDivWithClass('carousel__pagination')\n    let buttons = []\n    this.root.appendChild(pagination)\n    for (let i = 0; i < this.items.length; i = i + this.options.slidesToScroll) {\n      let button = this.createDivWithClass('carousel__pagination__button')\n      button.addEventListener('click', () => this.gotoItem(i))\n      pagination.appendChild(button)\n      buttons.push(button)\n    }\n    this.onMove(index => {\n      let activeButton = buttons[Math.floor(index / this.options.slidesToScroll)]\n      if (activeButton) {\n        buttons.forEach(button => button.classList.remove('carousel__pagination__button--active'))\n        activeButton.classList.add('carousel__pagination__button--active')\n      }\n    })\n  }\n\n  /**\n   *\n   */\n  next () {\n    this.gotoItem(this.currentItem + this.slidesToScroll)\n  }\n\n  prev () {\n    this.gotoItem(this.currentItem - this.slidesToScroll)\n  }\n\n  /**\n   * Déplace le carousel vers l'élément ciblé\n   * @param {number} index\n   */\n  gotoItem (index) {\n    if (index < 0) {\n      if (this.options.loop) {\n        index = this.items.length - this.slidesVisible\n      } else {\n        return\n      }\n    } else if (index >= this.items.length || (this.items[this.currentItem + this.slidesVisible] === undefined && index > this.currentItem)) {\n      if (this.options.loop) {\n        index = 0\n      } else {\n        return\n      }\n    }\n    let translateX = index * -100 / this.items.length\n    this.container.style.transform = 'translate3d(' + translateX + '%, 0, 0)'\n    this.currentItem = index\n    this.moveCallbacks.forEach(cb => cb(index))\n  }\n\n  /**\n   * Rajoute un écouteur qui écoute le déplacement du carousel\n   * @param {moveCallback} cb\n   */\n  onMove (cb) {\n    this.moveCallbacks.push(cb)\n  }\n\n  /**\n   * Ecouteur pour le redimensionnement de la fenêtre\n   */\n  onWindowResize () {\n    let mobile = window.innerWidth < 800\n    if (mobile !== this.isMobile) {\n      this.isMobile = mobile\n      this.setStyle()\n      this.moveCallbacks.forEach(cb => cb(this.currentItem))\n    }\n  }\n\n  /**\n   * Helper pour créer une div avec une classe\n   * @param {string} className\n   * @returns {HTMLElement}\n   */\n  createDivWithClass (className) {\n    let div = document.createElement('div')\n    div.setAttribute('class', className)\n    return div\n  }\n\n  /**\n   * @returns {number}\n   */\n  get slidesToScroll () {\n    return this.isMobile ? 1 : this.options.slidesToScroll\n  }\n\n  /**\n   * @returns {number}\n   */\n  get slidesVisible () {\n    return this.isMobile ? 1 : this.options.slidesVisible\n  }\n\n}\n\nlet onReady = function () {\n\n  new Carousel(document.querySelector('#carousel2'), {\n    slidesVisible: 2,\n    slidesToScroll: 2,\n    pagination: true,\n    loop: true\n  })\n \n}\n \n\nif (document.readyState !== 'loading') {\n  onReady()\n}\ndocument.addEventListener('DOMContentLoaded', onReady)\n"],"file":"main.dev.js"}